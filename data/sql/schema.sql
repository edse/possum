CREATE TABLE asset (id BIGINT AUTO_INCREMENT, asset_type_id BIGINT NOT NULL, site_id BIGINT, user_id BIGINT NOT NULL, category_id BIGINT, title VARCHAR(255) NOT NULL, description text(610), display_order BIGINT, is_active TINYINT(1) DEFAULT '0', views BIGINT, ugc TINYINT(1) DEFAULT '0', date_start DATETIME, date_end DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX asset_sluggable_idx (slug), INDEX asset_type_id_idx (asset_type_id), INDEX category_id_idx (category_id), INDEX user_id_idx (user_id), INDEX site_id_idx (site_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_answer (id BIGINT AUTO_INCREMENT, asset_id BIGINT, asset_question_id BIGINT, answer VARCHAR(255) NOT NULL, votes BIGINT, INDEX asset_id_idx (asset_id), INDEX asset_question_id_idx (asset_question_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_audio (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, file VARCHAR(255) NOT NULL, original_file VARCHAR(255) NOT NULL, genre VARCHAR(255), source VARCHAR(255), author VARCHAR(255), interpret VARCHAR(255), composer VARCHAR(255), year VARCHAR(255), label VARCHAR(255), extension VARCHAR(255) NOT NULL, original_file_size VARCHAR(255) NOT NULL, duration VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_audio_gallery (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, headline VARCHAR(255), source VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_broadcast (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, number VARCHAR(255), headline VARCHAR(255), headline_long VARCHAR(255), date_recording_start DATETIME, date_recording_end DATETIME, date_exibition_start DATETIME NOT NULL, date_exibition_end DATETIME, cam1 VARCHAR(255) NOT NULL, cam2 VARCHAR(255), cam3 VARCHAR(255), cam4 VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_content (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, headline VARCHAR(255), headline_short VARCHAR(255), headline_long text, content LONGBLOB, source VARCHAR(255), author VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_episode (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, asset_season_id BIGINT, headline VARCHAR(255), long_description text(610), transcription LONGTEXT, number VARCHAR(255), director VARCHAR(255), actor VARCHAR(255), producer VARCHAR(255), writter VARCHAR(255), date_record DATE, date_release DATE, url VARCHAR(255), INDEX asset_id_idx (asset_id), INDEX asset_season_id_idx (asset_season_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_event (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, title VARCHAR(255), description VARCHAR(255), headline VARCHAR(255), date DATE, url VARCHAR(255), country VARCHAR(255), state VARCHAR(255), city VARCHAR(255), address VARCHAR(255), directions VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_file (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, file VARCHAR(255) NOT NULL, genre VARCHAR(255), source VARCHAR(255), author VARCHAR(255), extension VARCHAR(255) NOT NULL, file_size VARCHAR(255) NOT NULL, INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_image (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, file VARCHAR(255) NOT NULL, original_file VARCHAR(255) NOT NULL, headline VARCHAR(255), genre VARCHAR(255) NOT NULL, source VARCHAR(255) NOT NULL, author VARCHAR(255) NOT NULL, original_file_size VARCHAR(255) NOT NULL, width VARCHAR(255) NOT NULL, height VARCHAR(255) NOT NULL, extension VARCHAR(255) NOT NULL, INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_image_gallery (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, headline VARCHAR(255), text LONGTEXT, source VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_link (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, name VARCHAR(255) NOT NULL, url VARCHAR(255), target VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_person (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, type VARCHAR(255), name VARCHAR(255) NOT NULL, headline VARCHAR(255), dob DATE, bio text NOT NULL, website_url VARCHAR(255), facebook_url VARCHAR(255), twitter_url VARCHAR(255), youtube_url VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_question (id BIGINT AUTO_INCREMENT, asset_id BIGINT, asset_questionnaire_id BIGINT, spreadsheet_id VARCHAR(255), worksheet_id VARCHAR(255), question VARCHAR(255) NOT NULL, INDEX asset_id_idx (asset_id), INDEX asset_questionnaire_id_idx (asset_questionnaire_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_questionnaire (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, name VARCHAR(255) NOT NULL, headline VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_season (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, headline VARCHAR(255), number VARCHAR(255), year VARCHAR(255), director VARCHAR(255), url VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_type (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL, description VARCHAR(255), model VARCHAR(255) NOT NULL, display_order BIGINT NOT NULL, is_active TINYINT(1) DEFAULT '0' NOT NULL, is_visible TINYINT(1) DEFAULT '0' NOT NULL, upload_input TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), INDEX upload_input_idx_idx (upload_input), INDEX is_visible_idx_idx (is_visible), UNIQUE INDEX asset_type_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_video (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, youtube_id VARCHAR(255), youtube_thumb VARCHAR(255), file VARCHAR(255), original_file VARCHAR(255), headline VARCHAR(255), genre VARCHAR(255), source VARCHAR(255), author VARCHAR(255), width VARCHAR(255), height VARCHAR(255), extension VARCHAR(255), original_file_size VARCHAR(255), frame_rate VARCHAR(255), bitrate VARCHAR(255), duration VARCHAR(255), start_from VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_video_gallery (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, youtube_id VARCHAR(255), headline VARCHAR(255), source VARCHAR(255), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE asset_vote (id BIGINT AUTO_INCREMENT, asset_id BIGINT NOT NULL, ip VARCHAR(255) NOT NULL, INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE block (id BIGINT AUTO_INCREMENT, section_id BIGINT, title VARCHAR(255) NOT NULL, description VARCHAR(255), query VARCHAR(255), is_random TINYINT(1) DEFAULT '0' NOT NULL, is_automatic TINYINT(1) DEFAULT '0' NOT NULL, items BIGINT, items_order VARCHAR(255), display_order BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX section_id_idx (section_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE category (id BIGINT AUTO_INCREMENT, organization_id BIGINT, title VARCHAR(255) NOT NULL, description VARCHAR(255), is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX category_sluggable_idx (slug), INDEX organization_id_idx (organization_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE category_asset (asset_id BIGINT, category_id BIGINT, PRIMARY KEY(asset_id, category_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE channel (id BIGINT AUTO_INCREMENT, organization_id BIGINT, title VARCHAR(255) NOT NULL, description VARCHAR(255), image_icon VARCHAR(255), image_thumb VARCHAR(255), url VARCHAR(255), is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX channel_sluggable_idx (slug), INDEX organization_id_idx (organization_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE channel_program (channel_id BIGINT, program_id BIGINT, PRIMARY KEY(channel_id, program_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE display (id BIGINT AUTO_INCREMENT, block_id BIGINT, asset_id BIGINT, type VARCHAR(255) NOT NULL, title VARCHAR(255) NOT NULL, description VARCHAR(255), headline VARCHAR(255), file VARCHAR(255), label VARCHAR(255), url VARCHAR(255), target VARCHAR(255), image VARCHAR(255), html LONGBLOB, video_offset VARCHAR(255), date_start DATETIME, date_end DATETIME, display_order BIGINT, is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX block_id_idx (block_id), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE image_usage (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL, description VARCHAR(255), width BIGINT NOT NULL, height BIGINT NOT NULL, background TINYINT(1) DEFAULT '0' NOT NULL, background_color VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX image_usage_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE log (id BIGINT AUTO_INCREMENT, user_id BIGINT, site_id BIGINT, asset BIGINT, asset_title VARCHAR(255), action VARCHAR(255) NOT NULL, class VARCHAR(255), ip VARCHAR(255), status VARCHAR(255), created_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX site_id_idx (site_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE message (id BIGINT AUTO_INCREMENT, parent_id BIGINT, sender_user_id BIGINT, to_user_id BIGINT, title VARCHAR(255) NOT NULL, status VARCHAR(255) NOT NULL, flag VARCHAR(255), email VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX message_sluggable_idx (slug), INDEX parent_id_idx (parent_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE organization (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL, description VARCHAR(255), is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX organization_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE program (id BIGINT AUTO_INCREMENT, site_id BIGINT, channel_id BIGINT, type VARCHAR(255), title VARCHAR(255) NOT NULL, description VARCHAR(255), long_description text(610), schedule VARCHAR(255), image_icon VARCHAR(255), image_thumb VARCHAR(255), image_live VARCHAR(255), tv_rating VARCHAR(255), tv_category VARCHAR(255), is_active TINYINT(1) DEFAULT '0' NOT NULL, is_in_menu TINYINT(1) DEFAULT '0', is_a_course TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), INDEX is_in_menu_idx_idx (is_in_menu), INDEX is_a_course_idx_idx (is_a_course), UNIQUE INDEX program_sluggable_idx (slug), INDEX channel_id_idx (channel_id), INDEX site_id_idx (site_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE related_asset (id BIGINT AUTO_INCREMENT, parent_asset_id BIGINT NOT NULL, asset_id BIGINT NOT NULL, type VARCHAR(255), description VARCHAR(255), is_active TINYINT(1) DEFAULT '0' NOT NULL, display_order BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE related_asset_type (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL, description VARCHAR(255), is_active TINYINT(1) DEFAULT '1' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE schedule (id BIGINT AUTO_INCREMENT, channel_id BIGINT, program_id BIGINT, type VARCHAR(255), title VARCHAR(255), description text(610), description_short text(255), image VARCHAR(255), tv_rating VARCHAR(255), tv_category VARCHAR(255), image_source VARCHAR(255), date_start DATETIME NOT NULL, date_end DATETIME NOT NULL, is_active TINYINT(1) DEFAULT '1' NOT NULL, is_important TINYINT(1) DEFAULT '0', is_live TINYINT(1) DEFAULT '0', is_geoblocked TINYINT(1) DEFAULT '0', url VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX is_important_idx_idx (is_important), INDEX channel_id_idx (channel_id), INDEX program_id_idx (program_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE section (id BIGINT AUTO_INCREMENT, parent_section_id BIGINT, site_id BIGINT NOT NULL, title VARCHAR(255) NOT NULL, description VARCHAR(255), display_order BIGINT, is_homepage TINYINT(1) DEFAULT '0', is_editorial TINYINT(1) DEFAULT '0' NOT NULL, is_visible TINYINT(1) DEFAULT '1', is_active TINYINT(1) DEFAULT '1' NOT NULL, url VARCHAR(255), keywords VARCHAR(255), contact_email VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), INDEX site_id_idx (site_id), INDEX parent_section_id_idx (parent_section_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE section_asset (id BIGINT AUTO_INCREMENT, section_id BIGINT NOT NULL, asset_id BIGINT NOT NULL, is_active TINYINT(1) DEFAULT '0' NOT NULL, display_order BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX section_id_idx (section_id), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE section_user (id BIGINT AUTO_INCREMENT, section_id BIGINT NOT NULL, user_id BIGINT NOT NULL, title VARCHAR(255) NOT NULL, description VARCHAR(255), is_active TINYINT(1) DEFAULT '0' NOT NULL, display_order BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX section_id_idx (section_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE site (id BIGINT AUTO_INCREMENT, type VARCHAR(255), title VARCHAR(255) NOT NULL, description VARCHAR(255), url VARCHAR(255), path VARCHAR(255), headline VARCHAR(255), meta_title VARCHAR(255), meta_charset VARCHAR(255), meta_classification VARCHAR(255), meta_description VARCHAR(255), meta_keywords VARCHAR(255), meta_author VARCHAR(255), youtube_channel VARCHAR(255), youtube_genre VARCHAR(255), twitter_account VARCHAR(255), twitter_url VARCHAR(255), facebook_url VARCHAR(255), image_icon VARCHAR(255), image_thumb VARCHAR(255), contact_email VARCHAR(255), is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX site_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE site_user (site_id BIGINT, user_id BIGINT, PRIMARY KEY(site_id, user_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sony_asset (id BIGINT AUTO_INCREMENT, youtube_id VARCHAR(50), title VARCHAR(128) NOT NULL, description VARCHAR(255), image VARCHAR(255), file1 VARCHAR(255), file2 VARCHAR(255), rating VARCHAR(255), duration VARCHAR(255), display_order BIGINT, is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX sony_asset_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sony_category (id BIGINT AUTO_INCREMENT, sony_category_id BIGINT, title VARCHAR(128) NOT NULL, description VARCHAR(255), image VARCHAR(255), display_order BIGINT, is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX sony_category_sluggable_idx (slug), INDEX sony_category_id_idx (sony_category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sony_category_asset (id BIGINT AUTO_INCREMENT, sony_category_id BIGINT NOT NULL, sony_asset_id BIGINT NOT NULL, is_active TINYINT(1) DEFAULT '0' NOT NULL, display_order BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX sony_asset_id_idx (sony_asset_id), INDEX sony_category_id_idx (sony_category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tag (id BIGINT AUTO_INCREMENT, name VARCHAR(100), is_triple TINYINT(1), triple_namespace VARCHAR(100), triple_key VARCHAR(100), triple_value VARCHAR(100), INDEX name_idx (name), INDEX triple1_idx (triple_namespace), INDEX triple2_idx (triple_key), INDEX triple3_idx (triple_value), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tagging (id BIGINT AUTO_INCREMENT, tag_id BIGINT NOT NULL, taggable_model VARCHAR(30), taggable_id BIGINT, INDEX tag_idx (tag_id), INDEX taggable_idx (taggable_model, taggable_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE task (id BIGINT AUTO_INCREMENT, parent_id BIGINT, site_id BIGINT, user_id BIGINT, title VARCHAR(255), description VARCHAR(255), status VARCHAR(255), priority VARCHAR(255), flag VARCHAR(255), deadline DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX parent_id_idx (parent_id), INDEX site_id_idx (site_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE todo (id BIGINT AUTO_INCREMENT, parent_id BIGINT, user_id BIGINT, site_id BIGINT, asset_id BIGINT, title VARCHAR(255) NOT NULL, description VARCHAR(255), status VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX todo_sluggable_idx (slug), INDEX parent_id_idx (parent_id), INDEX user_id_idx (user_id), INDEX site_id_idx (site_id), INDEX asset_id_idx (asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE trebuchet_asset (id BIGINT AUTO_INCREMENT, youtube_id VARCHAR(50), title VARCHAR(128) NOT NULL, description VARCHAR(255), image VARCHAR(255), file1 VARCHAR(255), file2 VARCHAR(255), rating VARCHAR(255), duration VARCHAR(255), display_order BIGINT, is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX trebuchet_asset_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE trebuchet_category (id BIGINT AUTO_INCREMENT, trebuchet_category_id BIGINT, title VARCHAR(128) NOT NULL, description VARCHAR(255), image VARCHAR(255), display_order BIGINT, is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_active_idx_idx (is_active), UNIQUE INDEX trebuchet_category_sluggable_idx (slug), INDEX trebuchet_category_id_idx (trebuchet_category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE trebuchet_category_asset (id BIGINT AUTO_INCREMENT, trebuchet_category_id BIGINT NOT NULL, trebuchet_asset_id BIGINT NOT NULL, is_active TINYINT(1) DEFAULT '0' NOT NULL, display_order BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX trebuchet_category_id_idx (trebuchet_category_id), INDEX trebuchet_asset_id_idx (trebuchet_asset_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tweet (id BIGINT AUTO_INCREMENT, tweet_monitor_id BIGINT NOT NULL, twitter_id VARCHAR(255), date_published DATE NOT NULL, content text(610) NOT NULL, url VARCHAR(255), avatar VARCHAR(255) NOT NULL, author VARCHAR(255) NOT NULL, author_url VARCHAR(255) NOT NULL, INDEX tweet_monitor_id_idx (tweet_monitor_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tweet_monitor (id BIGINT AUTO_INCREMENT, title VARCHAR(255) NOT NULL, query VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE video_dropbox (id BIGINT AUTO_INCREMENT, asset_video_id BIGINT, asset_video_gallery_id BIGINT, youtube_id VARCHAR(255), action VARCHAR(255) NOT NULL, folder VARCHAR(255) NOT NULL, status VARCHAR(255) NOT NULL, message VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX asset_video_id_idx (asset_video_id), INDEX asset_video_gallery_id_idx (asset_video_gallery_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE view (id BIGINT AUTO_INCREMENT, asset BIGINT, section BIGINT, ip VARCHAR(255), created_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, authorized_ip VARCHAR(255), first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
ALTER TABLE asset ADD CONSTRAINT asset_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE asset ADD CONSTRAINT asset_site_id_site_id FOREIGN KEY (site_id) REFERENCES site(id);
ALTER TABLE asset ADD CONSTRAINT asset_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id);
ALTER TABLE asset ADD CONSTRAINT asset_asset_type_id_asset_type_id FOREIGN KEY (asset_type_id) REFERENCES asset_type(id);
ALTER TABLE asset_answer ADD CONSTRAINT asset_answer_asset_question_id_asset_question_id FOREIGN KEY (asset_question_id) REFERENCES asset_question(id);
ALTER TABLE asset_answer ADD CONSTRAINT asset_answer_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_audio ADD CONSTRAINT asset_audio_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_audio_gallery ADD CONSTRAINT asset_audio_gallery_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_broadcast ADD CONSTRAINT asset_broadcast_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_content ADD CONSTRAINT asset_content_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_episode ADD CONSTRAINT asset_episode_asset_season_id_asset_season_id FOREIGN KEY (asset_season_id) REFERENCES asset_season(id);
ALTER TABLE asset_episode ADD CONSTRAINT asset_episode_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_event ADD CONSTRAINT asset_event_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_file ADD CONSTRAINT asset_file_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_image ADD CONSTRAINT asset_image_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_image_gallery ADD CONSTRAINT asset_image_gallery_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_link ADD CONSTRAINT asset_link_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_person ADD CONSTRAINT asset_person_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_question ADD CONSTRAINT asset_question_asset_questionnaire_id_asset_questionnaire_id FOREIGN KEY (asset_questionnaire_id) REFERENCES asset_questionnaire(id);
ALTER TABLE asset_question ADD CONSTRAINT asset_question_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_questionnaire ADD CONSTRAINT asset_questionnaire_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_season ADD CONSTRAINT asset_season_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_video ADD CONSTRAINT asset_video_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_video_gallery ADD CONSTRAINT asset_video_gallery_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE asset_vote ADD CONSTRAINT asset_vote_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE block ADD CONSTRAINT block_section_id_section_id FOREIGN KEY (section_id) REFERENCES section(id);
ALTER TABLE category ADD CONSTRAINT category_organization_id_organization_id FOREIGN KEY (organization_id) REFERENCES organization(id);
ALTER TABLE category_asset ADD CONSTRAINT category_asset_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id) ON DELETE CASCADE;
ALTER TABLE category_asset ADD CONSTRAINT category_asset_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE channel ADD CONSTRAINT channel_organization_id_organization_id FOREIGN KEY (organization_id) REFERENCES organization(id);
ALTER TABLE channel_program ADD CONSTRAINT channel_program_program_id_program_id FOREIGN KEY (program_id) REFERENCES program(id) ON DELETE CASCADE;
ALTER TABLE channel_program ADD CONSTRAINT channel_program_channel_id_channel_id FOREIGN KEY (channel_id) REFERENCES channel(id) ON DELETE CASCADE;
ALTER TABLE display ADD CONSTRAINT display_block_id_block_id FOREIGN KEY (block_id) REFERENCES block(id);
ALTER TABLE display ADD CONSTRAINT display_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id);
ALTER TABLE log ADD CONSTRAINT log_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE log ADD CONSTRAINT log_site_id_site_id FOREIGN KEY (site_id) REFERENCES site(id);
ALTER TABLE message ADD CONSTRAINT message_parent_id_message_id FOREIGN KEY (parent_id) REFERENCES message(id);
ALTER TABLE program ADD CONSTRAINT program_site_id_site_id FOREIGN KEY (site_id) REFERENCES site(id);
ALTER TABLE program ADD CONSTRAINT program_channel_id_channel_id FOREIGN KEY (channel_id) REFERENCES channel(id);
ALTER TABLE related_asset ADD CONSTRAINT related_asset_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id);
ALTER TABLE schedule ADD CONSTRAINT schedule_program_id_program_id FOREIGN KEY (program_id) REFERENCES program(id);
ALTER TABLE schedule ADD CONSTRAINT schedule_channel_id_channel_id FOREIGN KEY (channel_id) REFERENCES channel(id);
ALTER TABLE section ADD CONSTRAINT section_site_id_site_id FOREIGN KEY (site_id) REFERENCES site(id);
ALTER TABLE section ADD CONSTRAINT section_parent_section_id_section_id FOREIGN KEY (parent_section_id) REFERENCES section(id);
ALTER TABLE section_asset ADD CONSTRAINT section_asset_section_id_section_id FOREIGN KEY (section_id) REFERENCES section(id) ON DELETE CASCADE;
ALTER TABLE section_asset ADD CONSTRAINT section_asset_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE section_user ADD CONSTRAINT section_user_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE section_user ADD CONSTRAINT section_user_section_id_section_id FOREIGN KEY (section_id) REFERENCES section(id);
ALTER TABLE site_user ADD CONSTRAINT site_user_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE site_user ADD CONSTRAINT site_user_site_id_site_id FOREIGN KEY (site_id) REFERENCES site(id) ON DELETE CASCADE;
ALTER TABLE sony_category ADD CONSTRAINT sony_category_sony_category_id_sony_category_id FOREIGN KEY (sony_category_id) REFERENCES sony_category(id);
ALTER TABLE sony_category_asset ADD CONSTRAINT sony_category_asset_sony_category_id_sony_category_id FOREIGN KEY (sony_category_id) REFERENCES sony_category(id) ON DELETE CASCADE;
ALTER TABLE sony_category_asset ADD CONSTRAINT sony_category_asset_sony_asset_id_sony_asset_id FOREIGN KEY (sony_asset_id) REFERENCES sony_asset(id) ON DELETE CASCADE;
ALTER TABLE task ADD CONSTRAINT task_site_id_site_id FOREIGN KEY (site_id) REFERENCES site(id);
ALTER TABLE task ADD CONSTRAINT task_parent_id_message_id FOREIGN KEY (parent_id) REFERENCES message(id);
ALTER TABLE todo ADD CONSTRAINT todo_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE todo ADD CONSTRAINT todo_site_id_site_id FOREIGN KEY (site_id) REFERENCES site(id);
ALTER TABLE todo ADD CONSTRAINT todo_parent_id_todo_id FOREIGN KEY (parent_id) REFERENCES todo(id);
ALTER TABLE todo ADD CONSTRAINT todo_asset_id_asset_id FOREIGN KEY (asset_id) REFERENCES asset(id) ON DELETE CASCADE;
ALTER TABLE trebuchet_category ADD CONSTRAINT trebuchet_category_trebuchet_category_id_trebuchet_category_id FOREIGN KEY (trebuchet_category_id) REFERENCES trebuchet_category(id);
ALTER TABLE trebuchet_category_asset ADD CONSTRAINT ttti FOREIGN KEY (trebuchet_category_id) REFERENCES trebuchet_category(id) ON DELETE CASCADE;
ALTER TABLE trebuchet_category_asset ADD CONSTRAINT trebuchet_category_asset_trebuchet_asset_id_trebuchet_asset_id FOREIGN KEY (trebuchet_asset_id) REFERENCES trebuchet_asset(id) ON DELETE CASCADE;
ALTER TABLE tweet ADD CONSTRAINT tweet_tweet_monitor_id_tweet_monitor_id FOREIGN KEY (tweet_monitor_id) REFERENCES tweet_monitor(id);
ALTER TABLE video_dropbox ADD CONSTRAINT video_dropbox_asset_video_id_asset_video_id FOREIGN KEY (asset_video_id) REFERENCES asset_video(id);
ALTER TABLE video_dropbox ADD CONSTRAINT video_dropbox_asset_video_gallery_id_asset_video_gallery_id FOREIGN KEY (asset_video_gallery_id) REFERENCES asset_video_gallery(id);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
